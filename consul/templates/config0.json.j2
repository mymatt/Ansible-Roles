{

  "datacenter": "Dev",
  "data_dir": "/tmp/consul",
  "log_level": "INFO",
  "enable_script_checks": true,
  "client_addr": "0.0.0.0",
  "node_name": "{{ node_name }}",
  "bind_addr": "{{ consul_ip }}",
{% if (agent == 'server') %}
  "server": true,
  "bootstrap_expect": 1
{% else %}
  "server": false,
  "retry_join": ["provider=aws tag_key=Name tag_value=consul"],
  "retry_interval": "10s",
  "ui": true,
  "service": {
    "id": "{{ service_web }}",
    "name": "{{ service_web }}",
    "port": 80,
    "check": {
      "http": "http://localhost:80",
      "interval": "10s"
    }
  }
{% endif %}

}
